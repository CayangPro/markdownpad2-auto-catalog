/*
|--------------------------------------------------------------------------
| MarkdownPad2AutoCatalog
| MarkdownPad2 编辑器导出 html 文件时自动生成左侧目录插件
|--------------------------------------------------------------------------
| 插件地址：
| GitHub https://github.com/cayxc/MarkdownPad2AutoCatalog
| Gitee  https://gitee.com/cayxc/MarkdownPad2AutoCatalog
|
*/
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=0)}([function(e,t,n){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var l=void 0,s=void 0,c=void 0,r=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l=this,"boolean"!=typeof t&&(t=!0,console.error("传入参数类型有误，已按照默认配置执行，该参数类型为：Boolean")),"number"!=typeof n&&(n=1,console.error("传入参数类型有误，已按照默认配置执行，该参数类型为：Number")),"boolean"!=typeof o&&(o=!1,console.error("传入参数类型有误，已按照默认配置执行，该参数类型为：Boolean")),this.showIndex=t,this.indexStyle=n,this.openDark=o,s=n,c=t,null==document.querySelector("#left-container")&&this.replaceOld(),this.leftElement=document.querySelector("#left-container"),this.rightElement=document.querySelector("#right-container"),this.content=document.querySelector("#content"),this.topElement=document.querySelector(".top-container"),this.listElement=document.querySelector(".list-wrapper"),this.switchButton=document.querySelector("#switch-button"),this.switchListButton=document.querySelector(".catalog-button"),this.viewModeButton=document.querySelector(".mode"),this.allIcon=this.listElement.children[0].querySelectorAll("i"),this.allChildLevel=this.listElement.children[0].querySelectorAll("ul"),this.allCatalogElement=this.listElement.querySelectorAll("a"),this.showIndexEl=document.querySelector(".index"),this.allIndex=this.listElement.querySelectorAll("p"),this.haveChileLevel(),this.switchCatalog(),this.switchCatalogList(),this.switchParentCatalog(),this.singLeCatalogClick(),this.catalogTrack(),this.nightView(),this.showCatalogIndex(),this.choseCatalogStyle(),this.searchCatalog()}return i(e,[{key:"createContent",value:function(){var e=document.body.innerHTML;document.body.innerHTML="",document.body.style.overflow="hidden";var t=void 0;this.openDark?(document.body.className="js-night-view",t="icon-night"):(document.body.className="",t="icon-sun");var n=document.createElement("div"),o=document.createElement("div");n.id="left-container",o.id="right-container";var i=void 0;i=this.showIndex?'<i class="iconfont icon-indexA"></i>':'<i class="iconfont icon-indexB"></i>';for(var l="",s=1;s<=3;s++)this.indexStyle==s?l+='<li class="active" ><span>样式 '+s+"</span></li>":l+="<li><span>样式 "+s+"</span></li>";n.innerHTML='\n<div class="top-container">\n        <i class="catalog-button iconfont icon-catalogClose"></i>\n        <div class="search-container">\n            <input type="text" class="search" name="search" placeholder="输入关键字搜索 . . .">\n            <i class="search-icon iconfont icon-cancel"></i>\n        </div>\n        <div class="search-result"></div>\n    </div>\n    <div id="list-container">\n        <div class="list-wrapper">\n        </div>\n    </div>\n    <div class="bottom-container">\n        <div class="mode-container">\n            <div class="mode">\n                <i class="iconfont '+t+'"></i>\n            </div>\n            <div class="index">\n'+i+'            \n</div>\n            <div class="structure">\n                <i class="iconfont icon-process"></i>\n                <ul class="structure-child">\n'+l+'                </ul>\n            </div>\n            <div class="color" style="display: none;">\n                <i class="iconfont icon-color"></i>\n                <div class="color-child">\n                    <span>自定义颜色</span>\n                    <input type="color">\n                </div>\n            </div>\n        </div>\n    </div>\n   <div id="switch-button">\n   <i class="iconfont icon-arrLeft"></i>\n   </div>\n',o.innerHTML='\n<div id="content">\n'+e+"\n</div>\n</div>\n",document.body.appendChild(n),document.body.appendChild(o);this.noteTips("div",'\n<p class="note-tips">\n 本文档经过 MarkdownPad2AutoCatalog 目录生成插件转换生成&emsp;插件详情：<a href="https://github.com/cayxc/MarkdownPad2AutoCatalog" target="_blank"> GitHub地址</a>&emsp;<a href="https://gitee.com/cayxc/MarkdownPad2AutoCatalog" target="_blank">Gitee地址</a></p>\n',"content")}},{key:"changeTag",value:function(){var e=document.querySelectorAll("h1");if(e.length>1){for(var t=document.querySelectorAll("h2,h3,h4,h5"),n=1,o=e.length;n<o;n++){var i=document.createElement("h2");i.innerHTML=e[n].innerHTML,e[n].parentNode.replaceChild(i,e[n])}for(var l=0,s=t.length;l<s;l++){var c="h"+(parseInt(t[l].nodeName.slice(1))+1),r=document.createElement(c);r.innerHTML=t[l].innerHTML,t[l].parentNode.replaceChild(r,t[l])}}}},{key:"getTagNumber",value:function(e){if("object"==(void 0===e?"undefined":o(e)))return Number(e.nodeName.slice(1));console.error("getTagNumber() 调用时参数类型错误，必须是一个h标签的对象集合！")}},{key:"findStrFre",value:function(e,t){if("string"==typeof e&&"string"==typeof e){for(var n=e.indexOf(t),o=0;-1!==n;)o++,n=e.indexOf(t,n+1);return o}console.error("findStrFre() 调用时参数类型错误！")}},{key:"levelTagArr",value:function(e){if(e<1||e>5||"number"!=typeof e)console.error("levelTagArr() 调用时参数类型错误！");else{for(var t=document.querySelectorAll("h2,h3,h4,h5,h6"),n=[],o=[],i=[],l=[],s=[],c=0,r=t.length;c<r;c++){switch(this.findStrFre(t[c].id,".")){case 0:n.push(t[c]);break;case 1:o.push(t[c]);break;case 2:i.push(t[c]);break;case 3:l.push(t[c]);break;case 4:s.push(t[c]);break;default:return}}switch(e){case 1:return n;case 2:return o;case 3:return i;case 4:return l;case 5:return s;default:return}}}},{key:"setLevelNumber",value:function(e){if("object"==(void 0===e?"undefined":o(e))){var t=e.id;if(-1==t.lastIndexOf("."))return"level-"+(parseInt(t.slice(6))+1);var n=t.lastIndexOf(".");return t.slice(0,n)+"."+(parseInt(t.slice(n+1))+1)}console.error("setLevelNumber() 调用时参数类型错误，必须是一个h标签的对象集合！")}},{key:"setTagLevel",value:function(){this.changeTag();var e=document.querySelectorAll("h2,h3,h4,h5,h6"),t=e.length;if(0!=t){if(1==t&&(e[0].id="level-1"),t>1){e[0].id="level-1";var n=this.getTagNumber(e[1])-this.getTagNumber(e[0]);e[1].id=n<=0?this.setLevelNumber(e[0]):e[0].id+".1";for(var o=2,i=t-1;o<=i;o++){var l=this.getTagNumber(e[o]),s=this.getTagNumber(e[o-1]);if(l<s)for(var c=o-1;c>=0;c--){var r=this.getTagNumber(e[c])-l;if(1==r){if(!(c>0)){e[o].id=this.setLevelNumber(e[c]);break}if(this.getTagNumber(e[c-1])==l){e[o].id=this.setLevelNumber(e[c-1]);break}}if(0==r){e[o].id=this.setLevelNumber(e[c]);break}}l>s&&(e[o].id=e[o-1].id+".1"),l==s&&(e[o].id=this.setLevelNumber(e[o-1]))}}}else document.querySelector(".list-wrapper").innerHTML='<ul>\n<li style="text-align:center;color: #ccc;font-size:14px;">\n抱歉...<br/>文档中未发现 h1~h6 标签<br/>无法生成目录</p>\n</li>\n</ul>\n'}},{key:"noteTips",value:function(e,t,n){if("string"==typeof e&&"string"==typeof t&&"string"==typeof n){var o=document.createElement(e);o.innerHTML=t,document.getElementById(n).appendChild(o)}else console.error("noteTips() 调用时参数类型错误！")}},{key:"createCatalogue",value:function(){this.setTagLevel();var e=document.querySelector(".list-wrapper"),t=document.createElement("ul"),n=void 0;n=this.showIndex?"":"js-close";for(var o=1;o<=5;o++){var i=this.levelTagArr(o),l=i.length;if(0==l)break;if(1==o)for(var s=0,c=l;s<c;s++){var r=document.createElement("li");r.innerHTML='\n<a href="'+window.location.pathname+"#"+i[s].id+'" class='+i[s].id+'>\n<p class="'+n+'">'+i[s].id.slice(6)+"</p>\n<span>"+i[s].innerText+"</span></a>\n",t.appendChild(r),e.appendChild(t)}if(o>1)for(var a=0,u=l;a<u;a++)for(var d=this.levelTagArr(o-1),h=0,f=d.length;h<f;h++){if(i[a].id.slice(6,i[a].id.lastIndexOf("."))==d[h].id.slice(6)){var v=d[h].id,p=document.getElementsByClassName(v)[0].parentNode;p.setAttribute("class","parent-level");var m=document.createElement("li");m.innerHTML='\n<a href="'+window.location.pathname+"#"+i[a].id+'" class='+i[a].id+'>\n<p class="'+n+'">'+i[a].id.slice(6)+"</p>\n<span>"+i[a].innerText+"</span></a>\n";var g=p.querySelector("ul");if(null!==g)g.appendChild(m);else{(g=document.createElement("ul")).setAttribute("class","js-close"),g.appendChild(m),p.appendChild(g);var b=document.createElement("i"),y=void 0;switch(this.indexStyle){case 1:y="iconfont icon-closeA";break;case 2:y="iconfont icon-closeB";break;case 3:y="iconfont icon-closeC";break;default:y="iconfont icon-closeA"}b.setAttribute("class",y),p.insertBefore(b,p.childNodes[0])}break}}}}},{key:"replaceOld",value:function(){this.createContent(),this.createCatalogue(),document.querySelector(".list-wrapper").querySelector("li").classList.add("js-active")}},{key:"haveChileLevel",value:function(){this.listElement.querySelector(".parent-level")||(this.listElement.children[0].style.paddingLeft="0")}},{key:"switchCatalog",value:function(){var e=this.switchButton,t=this.leftElement,n=this.rightElement,o=0;e.onclick=function(){var e=document.documentElement.clientWidth;1==o?(this.children[0].setAttribute("class","iconfont icon-arrLeft"),t.style.width=e>750?"280px":"60%",t.classList.remove("js-switch-button"),n.style.padding="15px 15px 0 295px",o=0):(this.children[0].setAttribute("class","iconfont icon-closeC"),t.style.width="0",t.style.padding="0",t.classList.add("js-switch-button"),t.classList.add("js-switch-button"),n.style.padding="15px 15px 0",o=1)}}},{key:"switchCatalogList",value:function(){var e=this.switchListButton,t=this.topElement,n=this.allIcon,o=this.allChildLevel;e.onclick=function(){if(t.querySelector(".icon-catalogClose")){this.setAttribute("class","catalog-button iconfont icon-catalogOpen");for(var e=0,i=n.length;e<i;e++)1==s?n[e].setAttribute("class","iconfont icon-openA"):2==s?n[e].setAttribute("class","iconfont icon-openB"):n[e].setAttribute("class","iconfont icon-openC");for(var l=0,c=o.length;l<c;l++)o[l].setAttribute("class","js-open")}else{this.setAttribute("class","catalog-button iconfont icon-catalogClose");for(var r=0,a=n.length;r<a;r++)1==s?n[r].setAttribute("class","iconfont icon-closeA"):2==s?n[r].setAttribute("class","iconfont icon-closeB"):n[r].setAttribute("class","iconfont icon-closeC");for(var u=0,d=o.length;u<d;u++)o[u].setAttribute("class","js-close")}}}},{key:"switchParentCatalog",value:function(){for(var e=this.allIcon,t=this.topElement,n=document.querySelector(".list-wrapper").children[0].childNodes,o=[],i=function(i,l){e[i].onclick=function(){var l=void 0,c=void 0;switch(s){case 1:l="iconfont icon-closeA",c="iconfont icon-openA";break;case 2:l="iconfont icon-closeB",c="iconfont icon-openB";break;case 3:l="iconfont icon-closeC",c="iconfont icon-openC";break;default:l="iconfont icon-closeA",c="iconfont icon-openA"}"js-open"===e[i].nextElementSibling.nextElementSibling.getAttribute("class")?(e[i].setAttribute("class",l),e[i].nextElementSibling.nextElementSibling.setAttribute("class","js-close")):(e[i].setAttribute("class",c),e[i].nextElementSibling.nextElementSibling.setAttribute("class","js-open"));for(var r=0,a=n.length;r<a;r++){var u=n[r].querySelector("ul");o[r]=null==u?null:u.getAttribute("class")}o.includes("js-open")?t.children[0].setAttribute("class","catalog-button iconfont icon-catalogOpen"):t.children[0].setAttribute("class","catalog-button iconfont icon-catalogClose")}},l=0,c=e.length;l<c;l++)i(l)}},{key:"changeParentColor",value:function(e){if("object"!==(void 0===e?"undefined":o(e)))return console.error("changeParentColor() 参数必须是一个标签对象！"),!1;e.classList.add("js-active"),"LI"==e.parentElement.parentElement.nodeName&&this.changeParentColor(e.parentElement.parentElement)}},{key:"singLeCatalogClick",value:function(){for(var e=this.allCatalogElement,t=this.listElement,n=function(n,o){e[n].onclick=function(){for(var o=t.querySelectorAll(".js-active"),i=0,s=o.length;i<s;i++)o[i].classList.remove("js-active");this.parentElement.classList.add("js-active"),l.changeParentColor(e[n].parentElement)}},o=0,i=e.length;o<i;o++)n(o)}},{key:"catalogTrack",value:function(){for(var e=this.content.querySelectorAll("h2,h3,h4,h5,h6"),t=this.rightElement,n=this.listElement,o=this.allCatalogElement,i=[],s=0,c=e.length;s<c;s++)i.push(e[s].offsetTop-50);t.onscroll=function(){for(var e=t.scrollTop,s=0,c=i.length;s<c;s++)if(i[s]<=e){for(var r=n.querySelectorAll(".js-active"),a=0,u=r.length;a<u;a++)r[a].classList.remove("js-active");o[s].parentElement.classList.add("js-active"),l.changeParentColor(o[s].parentElement)}}}},{key:"nightView",value:function(){var e=void 0;e=null!=document.querySelector(".js-night-view");var t=this.viewModeButton,n=this.leftElement,o=this.switchButton;t.onclick=function(){e?(t.children[0].setAttribute("class","iconfont icon-sun"),document.body.classList.remove("js-night-view"),e=!1,n.style.borderColor="#ccc"):(t.children[0].setAttribute("class","iconfont icon-night"),document.body.classList.add("js-night-view"),e=!0,n.style.borderColor="#3E3D42")};var i=n.getAttribute("border-color");o.onmouseover=function(){n.style.borderColor="#3cae7c"},o.onmouseout=function(){n.style.borderColor=i}}},{key:"showCatalogIndex",value:function(){var e=c,t=this.allIndex;this.showIndexEl.onclick=function(){if(e){this.children[0].setAttribute("class","iconfont icon-indexB");for(var n=0,o=t.length;n<o;n++)t[n].classList.add("js-close");e=!1}else{this.children[0].setAttribute("class","iconfont icon-indexA");for(var i=0,l=t.length;i<l;i++)t[i].classList.remove("js-close");e=!0}}}},{key:"choseCatalogStyle",value:function(){for(var e=document.querySelector(".structure-child").querySelectorAll("li"),t=this.allIcon,n=function(n,o){e[n].onclick=function(){document.querySelector(".structure-child").querySelector(".active").removeAttribute("class"),e[n].setAttribute("class","active");for(var o=0,i=t.length;o<i;o++){var l=t[o].nextElementSibling.nextElementSibling.getAttribute("class");0==n?("js-close"==l?t[o].setAttribute("class","iconfont icon-closeA"):t[o].setAttribute("class","iconfont icon-openA"),s=1):1==n?("js-close"==l?t[o].setAttribute("class","iconfont icon-closeB"):t[o].setAttribute("class","iconfont icon-openB"),s=2):("js-close"==l?t[o].setAttribute("class","iconfont icon-closeC"):t[o].setAttribute("class","iconfont icon-openC"),s=3)}}},o=0,i=e.length;o<i;o++)n(o)}},{key:"comparison",value:function(e){if("string"!=typeof e)return console.error("comparison() 参数必须是一个字符串"),!1;e=e.toLowerCase();for(var t="",n=this.allCatalogElement,o=0,i=n.length;o<i;o++){if(-1!=n[o].innerText.replace(/\s+/g,"").toLowerCase().indexOf(e))t+='\n<a href="'+n[o].getAttribute("href")+'">'+n[o].innerText+"</a>\n"}return""==t&&(t='\n<i class="iconfont icon-search"></i>\n<span>目录中暂无相关搜索结果</span>\n<span>试试 Ctrl+F  在全文档搜索</span>\n'),t}},{key:"searchCatalog",value:function(){var e=document.querySelector(".search"),t=document.querySelector(".search-result"),n=e.nextElementSibling;e.onfocus=function(){e.onkeyup=function(){var o=e.value.replace(/\s+/g,"");o?function(){t.style.display="block",n.style.display="block";var e=l.comparison(o);t.innerHTML=e;for(var i=t.querySelectorAll("a"),s=function(e,t){i[e].onclick=function(){i[e].classList.add("js-active")}},c=0,r=i.length;c<r;c++)s(c)}():(t.style.display="none",n.style.display="none")}},n.onclick=function(){this.style.display="none",t.style.display="none",e.value=""}}}]),e}();window.onload=function(){new r}}]);